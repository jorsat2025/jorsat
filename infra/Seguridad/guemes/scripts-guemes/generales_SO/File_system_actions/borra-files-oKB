#!/bin/bash

echo "ğŸ—‚ï¸ Ingrese la ruta del directorio a revisar:"
read -r DIR

# ValidaciÃ³n de ruta
if [ ! -d "$DIR" ]; then
  echo "âŒ La ruta '$DIR' no es un directorio vÃ¡lido."
  exit 1
fi

echo "ğŸ” Buscando archivos de 0 KB en $DIR..."
ARCHIVOS=$(find "$DIR" -type f -size 0)

if [ -z "$ARCHIVOS" ]; then
  echo "âœ… No se encontraron archivos de 0 KB."
  exit 0
fi

echo "âš ï¸ Se encontraron los siguientes archivos vacÃ­os:"
echo "$ARCHIVOS"
echo
echo "Â¿QuÃ© desea hacer?"
echo "1) Eliminar todos automÃ¡ticamente"
echo "2) Eliminar uno por uno (modo interactivo)"
echo "3) Cancelar"
read -rp "OpciÃ³n: " OP

case "$OP" in
  1)
    echo "ğŸ§¹ Eliminando todos..."
    find "$DIR" -type f -size 0 -delete
    echo "âœ… Archivos eliminados."
    ;;
  2)
    echo "ğŸ§¼ EliminaciÃ³n interactiva:"
    while IFS= read -r archivo; do
      echo "Â¿Eliminar '$archivo'? (s/N)"
      read -r RES
      if [[ "$RES" =~ ^[sS]$ ]]; then
        rm -f "$archivo" && echo "ğŸ—‘ï¸ Eliminado."
      else
        echo "â­ï¸ Saltado."
      fi
    done <<< "$ARCHIVOS"
    ;;
  *)
    echo "ğŸš« Cancelado."
    ;;
esac
